<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="nwfscSurvey">
<title>nwfscSurvey • nwfscSurvey</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="nwfscSurvey">
<meta property="og:description" content="nwfscSurvey">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nwfscSurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/nwfscSurvey.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>nwfscSurvey</h1>
                        <h4 data-toc-skip class="author">Chantel
Wetzel</h4>
            
            <h4 data-toc-skip class="date">2022-12-16</h4>
      
      
      <div class="d-none name"><code>nwfscSurvey.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <strong>nwfscSurvey</strong> package was written by scientists at
the Northwest Fisheries Science Center (NWFSC) to explore and process
survey composition data for use in groundfish stockassessments. The
package can be used for the NWFSC West Coast Groundfish Bottom Trawl
(WCGBT) survey, the NWFSC slope survey, the Alaska Fisheries Science
Center (AFSC) slope survey, and the AFSC Triennial survey. The package
includes functions that query the <a href="https://www.nwfsc.noaa.gov/data" class="external-link">NWFSC data warehouse</a>,
visualize, and process the data for use in groundfish assessments.</p>
</div>
<div class="section level2">
<h2 id="use">Use<a class="anchor" aria-label="anchor" href="#use"></a>
</h2>
<p><strong>nwfscSurvey</strong> can be used to:</p>
<ul>
<li><p>Pull survey catch, haul, and biological data from the NWFSC data
warehouse.</p></li>
<li><p>Calculate the design based indices based upon pre-specified
stratification.</p></li>
<li><p>Create length- and age-composition data expanded by the
design-based indices formated for use in Stock Synthesis.</p></li>
<li><p>Create unexpanded conditional age-at-length composition data for
use in Stock Synthesis.</p></li>
<li><p>Create plots to visualize the data: design-based index plots,
bubble plots of length and age data, observeed sex ratio, and
distributions across depth and latitude.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<p>A list of all functions in the packages can be viewed by:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="st">"package:nwfscSurvey"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="nwfsc-wcgbt-survey">NWFSC WCGBT Survey<a class="anchor" aria-label="anchor" href="#nwfsc-wcgbt-survey"></a>
</h3>
<div class="section level4">
<h4 id="pull-data">Pull data<a class="anchor" aria-label="anchor" href="#pull-data"></a>
</h4>
<p>Pull both the catch and biological data:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">catch</span> <span class="op">=</span> <span class="fu"><a href="../reference/PullCatch.fn.html">PullCatch.fn</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="st">"Pacific ocean perch"</span>, </span>
<span>                     SurveyName <span class="op">=</span> <span class="st">"NWFSC.Combo"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bio</span>   <span class="op">=</span> <span class="fu"><a href="../reference/PullBio.fn.html">PullBio.fn</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="st">"Pacific ocean perch"</span>, </span>
<span>                   SurveyName <span class="op">=</span> <span class="st">"NWFSC.Combo"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="initial-data-visualization">Initial data visualization<a class="anchor" aria-label="anchor" href="#initial-data-visualization"></a>
</h4>
<p>There are a range of functions to create visualizations of the data
by examining catch rates by latitude or depth, lengths or ages by
latitude and depth, presence/absence in tows, and observed sex
ratios.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_cpue.html">plot_cpue</a></span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>  catch <span class="op">=</span> <span class="va">catch</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_bio_patterns.html">plot_bio_patterns</a></span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>  bio <span class="op">=</span> <span class="va">bio</span>, </span>
<span>  col_name <span class="op">=</span> <span class="st">"Length_cm"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_proportion.html">plot_proportion</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">catch</span>, </span>
<span>  dim <span class="op">=</span> <span class="st">"lat"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_proportion.html">plot_proportion</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">catch</span>, </span>
<span>  dim <span class="op">=</span> <span class="st">"depth"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_proportion.html">plot_proportion</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bio</span>, </span>
<span>  dim <span class="op">=</span> <span class="st">"sex"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="index-of-abundance">Index of abundance<a class="anchor" aria-label="anchor" href="#index-of-abundance"></a>
</h4>
<p>Define the stratification by depth and latitude that will be used to
calculate a design-based index of abundance:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>strata <span class="ot">=</span> <span class="fu">CreateStrataDF.fn</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"shallow_s"</span>, <span class="st">"mid_s"</span> <span class="st">"deep_s"</span>, <span class="st">"shallow_n"</span>, <span class="st">"mid_n"</span>, <span class="st">"deep_n"</span>), </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">depths.shallow =</span> <span class="fu">c</span>( <span class="dv">55</span>,   <span class="dv">200</span>, <span class="dv">300</span>,    <span class="dv">55</span>, <span class="dv">200</span>, <span class="dv">300</span>),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">depths.deep    =</span> <span class="fu">c</span>(<span class="dv">200</span>,   <span class="dv">300</span>, <span class="dv">400</span>,   <span class="dv">200</span>, <span class="dv">300</span>, <span class="dv">400</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">lats.south     =</span> <span class="fu">c</span>( <span class="dv">32</span>,    <span class="dv">32</span>,  <span class="dv">32</span>,    <span class="dv">42</span>,  <span class="dv">42</span>,  <span class="dv">42</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">lats.north     =</span> <span class="fu">c</span>( <span class="dv">42</span>,    <span class="dv">42</span>,  <span class="dv">42</span>,    <span class="dv">49</span>,  <span class="dv">49</span>,  <span class="dv">49</span>))</span></code></pre></div>
<p>Calculate the design based index of abundance:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">biomass</span> <span class="op">=</span> <span class="fu"><a href="../reference/Biomass.fn.html">Biomass.fn</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>                     dat <span class="op">=</span> <span class="va">catch</span>,  </span>
<span>                     strat.df <span class="op">=</span> <span class="va">strata</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/Biomass.fn.html">Biomass.fn()</a></code> returns a list with the second element
containing the design-based index of abundance. The design based index
is calculated based on the defined stratas. The function writes a csv
file inside the dir input location to a “forSS” folder. The function
returns a list with the second element containing the design-based
estimates by year:</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
Year
</th>
<th style="text-align:left;">
Season
</th>
<th style="text-align:left;">
Fleet
</th>
<th style="text-align:left;">
Value
</th>
<th style="text-align:left;">
seLogB
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
EnterFleet
</td>
<td style="text-align:left;">
21055083
</td>
<td style="text-align:left;">
0.357
</td>
</tr>
<tr>
<td style="text-align:left;">
…
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
EnterFleet
</td>
<td style="text-align:left;">
9766200
</td>
<td style="text-align:left;">
0.563
</td>
</tr>
</tbody>
</table>
<p>Plot the coastwide design-based index of abundance:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/PlotBio.fn.html">PlotBio.fn</a></span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>  dat <span class="op">=</span> <span class="va">biomass</span><span class="op">)</span></span></code></pre></div>
<p>Plot the coastwide design-based index of abundance for each
strata:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/PlotBioStrata.fn.html">PlotBioStrata.fn</a></span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>  dat <span class="op">=</span> <span class="va">biomass</span><span class="op">)</span></span></code></pre></div>
<p>If <code>dir</code> does not equal <code>NULL</code>, then a “plot”
folder will be created in the directory location and a png of the plot
will be saved.</p>
</div>
<div class="section level4">
<h4 id="length-composition-data">Length composition data<a class="anchor" aria-label="anchor" href="#length-composition-data"></a>
</h4>
<p><code>GetN()</code> calculates the input sample size based on Stewart
&amp; Hamel (2014) which determined that the input sample size was
related to the species group (flatfish, shelf rockfish, slope rockfish,
thornyhead, others, or all groups) and number of tows. The function
writes a csv file with the “forSS” folder containing the number of tows
and observed fish by year.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu">GetN</span><span class="op">(</span>dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>         dat <span class="op">=</span> <span class="va">bio</span>, </span>
<span>         type <span class="op">=</span> <span class="st">"length"</span>, </span>
<span>         species <span class="op">=</span> <span class="st">"shelfrock"</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/SurveyLFs.fn.html">SurveyLFs.fn()</a></code> calculates and formats the
length-composition data for Stock Synthesis:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">len_bins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">60</span>, <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Length_Freq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SurveyLFs.fn.html">SurveyLFs.fn</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>                        datL <span class="op">=</span>  <span class="va">bio</span>, </span>
<span>                        datTows <span class="op">=</span> <span class="va">catch</span>,</span>
<span>                        strata.df <span class="op">=</span> <span class="va">strata</span>,</span>
<span>                        lgthBins <span class="op">=</span> <span class="va">len_bins</span><span class="op">)</span></span></code></pre></div>
<p>The above call will calculate the length frequencies for use in Stock
Synthesis and write the files inside the “forSS” folder. The example
call does not assign unsexed fish to the sexed length comps but will
produce csv files for both the sexed and unsexed fish. If you would like
to assign the unsexed fish to a sex based on the sex ratio the user will
need to specificy the sex ratio value (sexRatioUnsexed) to use for fish
under a specified size (maxSizeUnsexed) where unsexed fish greater than
the specified size will be assign based on the sex ratio from other
observations.</p>
<p>There are many inputs to <code><a href="../reference/SurveyLFs.fn.html">SurveyLFs.fn()</a></code>, please look
over the function inputs to explore additional ways to process the
data.</p>
<p>To plot the length frequency data:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/PlotFreqData.fn.html">PlotFreqData.fn</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>                dat <span class="op">=</span> <span class="va">Length_Freq</span><span class="op">)</span></span></code></pre></div>
<p>A new function to visualize length frequency data is also
availble:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_comps.html">plot_comps</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">Length_Freq</span><span class="op">)</span></span></code></pre></div>
<p>If <code>dir</code> does not equal <code>NULL</code>, then a “plot”
folder will be created in the directory location and a png of the plot
will be saved.</p>
</div>
<div class="section level4">
<h4 id="marginal-age-composition-data">Marginal age composition data<a class="anchor" aria-label="anchor" href="#marginal-age-composition-data"></a>
</h4>
<p>Calculate the marginal age sample size:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu">getN</span><span class="op">(</span>dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>         dat <span class="op">=</span> <span class="va">bio</span>,</span>
<span>         type <span class="op">=</span> <span class="st">"age"</span>, </span>
<span>         species <span class="op">=</span> <span class="st">"shelfrock"</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/SurveyAFs.fn.html">SurveyAFs.fn()</a></code> calculates and formats the
age-composition data for Stock Synthesis:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_bins</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">50</span></span>
<span></span>
<span><span class="va">Ages</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SurveyAFs.fn.html">SurveyAFs.fn</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>                     datA <span class="op">=</span> <span class="va">bio</span>,</span>
<span>                     datTows <span class="op">=</span> <span class="va">catch</span>, </span>
<span>                     strat.df <span class="op">=</span> <span class="va">strata</span>,</span>
<span>                     ageBins <span class="op">=</span> <span class="va">age_bins</span>,</span>
<span>                     nSamps <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span></code></pre></div>
<p>The above call will calculate the marginal age-composition data for
the age data read in using <code>readInExcelAgeComps.fn()</code> and
writes the files inside the “forSS” folder.</p>
<p>To plot the age frequency data:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/PlotFreqData.fn.html">PlotFreqData.fn</a></span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>  dat <span class="op">=</span> <span class="va">Ages</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_comps.html">plot_comps</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">Ages</span><span class="op">)</span></span></code></pre></div>
<p>If <code>dir</code> is not <code>NULL</code>, then a “plot” folder
will be created in the directory location and a png of the plot will be
saved.</p>
</div>
<div class="section level4">
<h4 id="conditional-age-at-length-data">Conditional-age-at-length data<a class="anchor" aria-label="anchor" href="#conditional-age-at-length-data"></a>
</h4>
<p>To calculate conditional-age-at-length data formatted for Stock
Synthesis:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">caal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SurveyAgeAtLen.fn.html">SurveyAgeAtLen.fn</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>                          datAL <span class="op">=</span> <span class="va">bio</span>, </span>
<span>                          datTows <span class="op">=</span> <span class="va">catch</span>,</span>
<span>                          strata.df <span class="op">=</span> <span class="va">strata</span>,</span>
<span>                          lgthBins <span class="op">=</span> <span class="va">len.bins</span>, </span>
<span>                          ageBins <span class="op">=</span> <span class="va">age.bins</span><span class="op">)</span></span></code></pre></div>
<p>Creates unexpanded conditional-age-at-length data for both sexes with
input sample sizes based on the observed number of fish in each length
bin by year.</p>
</div>
<div class="section level4">
<h4 id="maps">Maps<a class="anchor" aria-label="anchor" href="#maps"></a>
</h4>
<p>To make a map showing the distribution of density in aggregate and by
year:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/PlotMap.fn.html">PlotMap.fn</a></span><span class="op">(</span></span>
<span>  dat <span class="op">=</span> <span class="va">catch</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="additional-data-visualization">Additional data visualization<a class="anchor" aria-label="anchor" href="#additional-data-visualization"></a>
</h4>
<p>There are a couple of additional plotting functions that are included
in the package:<code><a href="../reference/PlotVarLengthAtAge.fn.html">PlotVarLengthAtAge.fn()</a></code> and
<code><a href="../reference/PlotSexRatio.fn.html">PlotSexRatio.fn()</a></code>.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Chantel R. Wetzel, Kelli F. Johnson, Allan C. Hicks.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>

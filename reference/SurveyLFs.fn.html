<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Expands the lengths up to the total stratum area then sums over strata"><title>Expands the lengths up to the total stratum area then sums over strata — SurveyLFs.fn • nwfscSurvey</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Expands the lengths up to the total stratum area then sums over strata — SurveyLFs.fn"><meta property="og:description" content="Expands the lengths up to the total stratum area then sums over strata"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nwfscSurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/nwfscSurvey.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Expands the lengths up to the total stratum area then sums over strata</h1>
      
      <div class="d-none name"><code>SurveyLFs.fn.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Expands the lengths up to the total stratum area then sums over strata</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SurveyLFs.fn</span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">datL</span>,</span>
<span>  <span class="va">datTows</span>,</span>
<span>  strat.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Depth_m"</span>, <span class="st">"Latitude_dd"</span><span class="op">)</span>,</span>
<span>  strat.df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lgthBins <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  SSout <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  meanRatioMethod <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sex <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  NAs2zero <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  sexRatioUnsexed <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  maxSizeUnsexed <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  sexRatioStage <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  partition <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  fleet <span class="op">=</span> <span class="st">"Enter Fleet"</span>,</span>
<span>  agelow <span class="op">=</span> <span class="st">"Enter"</span>,</span>
<span>  agehigh <span class="op">=</span> <span class="st">"Enter"</span>,</span>
<span>  ageErr <span class="op">=</span> <span class="st">"Enter"</span>,</span>
<span>  nSamps <span class="op">=</span> <span class="st">"Enter Samps"</span>,</span>
<span>  month <span class="op">=</span> <span class="st">"Enter Month"</span>,</span>
<span>  printfolder <span class="op">=</span> <span class="st">"forSS"</span>,</span>
<span>  remove999 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  outputStage1 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sum100 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dir</dt>
<dd><p>A file path to an existing directory where you would like to
create a folder to store the output from this function. The default is
<code>dir = NULL</code>, which causes the function to not save any files. You can
store the output directly in <code>dir</code> if you specify <code>printfolder = ""</code>.</p></dd>


<dt>datL</dt>
<dd><p>A data frame of length-composition data returned from
<code><a href="PullBio.fn.html">PullBio.fn()</a></code>.</p></dd>


<dt>datTows</dt>
<dd><p>A data frame of catch data returned from <code><a href="PullCatch.fn.html">PullCatch.fn()</a></code>.</p></dd>


<dt>strat.vars</dt>
<dd><p>Variables in both <code>datL</code> and <code>datTows</code> that are used to
define the stratas. Default is bottom depth (m) and latitudes (decimal
degrees), i.e., <code>c("Depth_m", "Latitude_dd")</code>.</p></dd>


<dt>strat.df</dt>
<dd><p>A data frame that defines the strata and provides the
calculated areas for each strata returned from <code>createStrataDF.fn()</code>.</p></dd>


<dt>lgthBins</dt>
<dd><p>An integer vector of length bins.</p></dd>


<dt>SSout</dt>
<dd><p>A logical with the default of <code>TRUE</code>. If <code>TRUE</code>, the output
is returned in a format that can be directly pasted into an SS3 data file.</p></dd>


<dt>meanRatioMethod</dt>
<dd><p>A logical with the default of <code>TRUE</code>. If <code>TRUE</code>, then
the mean ratio is implemented instead of the total ratio. Search the
source code for the equations if more information is needed.</p></dd>


<dt>sex</dt>
<dd><p>(0, 1, 2, 3). The integer will be used to define the sex column
of the returned input for Stock Synthesis and specifies how the
composition are treated with respect to sex. See the Stock Synthesis
manual for more information. In short, 0 is for unsexed, 1 is females, 2
is males, and 3 is males and females where the sex ratio of the samples is
informative to the model. The default is <code>3</code>.</p></dd>


<dt>NAs2zero</dt>
<dd><p>A logical specifying if <code>NA</code>s should be changed to zeros.
The default is <code>TRUE</code>.</p></dd>


<dt>sexRatioUnsexed</dt>
<dd><p>A numerical value within <code>[0.0, 1.0]</code> that will be
used as the sex ratio for measured individuals less than <code>maxSizeUnsexed</code>.
If <code>NA_real_</code>, then the sex ratio for stage-1 expansion will not be
conducted.</p></dd>


<dt>maxSizeUnsexed</dt>
<dd><p>A numerical value specifying the right side of the
following bin <code>[0, maxSizeUnsexed]</code>, where all fish measured in this bin
are assigned a sex based on sexRatioUnsexed.
Fish with a measurement larger than this value will be assigned a sex
based on the calculated sex ratio in the data.</p></dd>


<dt>sexRatioStage</dt>
<dd><p>(1, 2). The stage of the expansion to apply the sex
ratio. The default is <code>1</code>.</p></dd>


<dt>partition, fleet, agelow, agehigh, ageErr, month</dt>
<dd><p>Each argument requires a
single integer value that will be used to set the associated column of the
returned input for Stock Synthesis. See the Stock Synthesis manual for
more information.</p></dd>


<dt>nSamps</dt>
<dd><p>A named vector of input or effective sample sizes that will be
used to set the effective sample size of the returned input for Stock
Synthesis. A value must be supplied for every year of data in <code>datL</code>.</p></dd>


<dt>printfolder</dt>
<dd><p>A string that will be appended to <code>dir</code>, creating a folder
where the length-composition output will be saved. If specified as <code>""</code>,
the output will just be saved directly in <code>dir</code>. The default is <code>"forSS"</code>.</p></dd>


<dt>remove999</dt>
<dd><p>A logical with the default of <code>TRUE</code>, which leads to the
output having the 999 column combined with the first length bin.</p></dd>


<dt>outputStage1</dt>
<dd><p>A logical specifying if you would like the function to
stop after the end of the first stage of the expansion process and return
output that is not ready for Stock Synthesis. This can be helpful when
wanting output that can be used as input for VAST.</p></dd>


<dt>sum100</dt>
<dd><p>A logical value specifying whether to rescale the compositions
to sum to 100. The default is <code>TRUE</code>.</p></dd>


<dt>verbose</dt>
<dd><p>A logical that specifies if you want to print messages and
warnings to the console. The default is <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The original version was written by Allan Hicks 16 March 2009. This function
has since been modified by Chantel Wetzel to work with the data warehouse
data formatting, add additional options of when to apply the sex ratio, and
correct some treatment of unsexed fish weighted by sample size and area.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="StrataFactors.fn.html">StrataFactors.fn()</a></code></p></li>
<li><p><code><a href="SexRatio.fn.html">SexRatio.fn()</a></code></p></li>
</ul></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Allan Hicks (16 March 2009) and Chantel Wetzel (maintainer)</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Chantel R. Wetzel, Kelli F. Johnson, Allan C. Hicks.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>


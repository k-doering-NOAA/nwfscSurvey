<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Expands the ages up to the total stratum area then sums over strata
Original Version Written by Allan Hicks 16 March 2009
Modified by Chantel Wetzel to work with the data warehouse data formatting,
add additional options of when to apply the sex ratio, and correct some treatment of unsexed fish
weighted by sample size and area
NOTE: The age bin called F0 or M0 is retained to show proportion of ages smaller than smallest bin
You will want to likely add this to your first age bin and delete this before putting in SS, or
start the ageBins argument at the 2nd age bin and F0 will be all fish smaller (hence the first age bin)"><title>Expands the ages up to the total stratum area then sums over strata Original Version Written by Allan Hicks 16 March 2009 Modified by Chantel Wetzel to work with the data warehouse data formatting, add additional options of when to apply the sex ratio, and correct some treatment of unsexed fish weighted by sample size and area NOTE: The age bin called F0 or M0 is retained to show proportion of ages smaller than smallest bin You will want to likely add this to your first age bin and delete this before putting in SS, or start the ageBins argument at the 2nd age bin and F0 will be all fish smaller (hence the first age bin) — SurveyAFs.fn • nwfscSurvey</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Expands the ages up to the total stratum area then sums over strata Original Version Written by Allan Hicks 16 March 2009 Modified by Chantel Wetzel to work with the data warehouse data formatting, add additional options of when to apply the sex ratio, and correct some treatment of unsexed fish weighted by sample size and area NOTE: The age bin called F0 or M0 is retained to show proportion of ages smaller than smallest bin You will want to likely add this to your first age bin and delete this before putting in SS, or start the ageBins argument at the 2nd age bin and F0 will be all fish smaller (hence the first age bin) — SurveyAFs.fn"><meta property="og:description" content="Expands the ages up to the total stratum area then sums over strata
Original Version Written by Allan Hicks 16 March 2009
Modified by Chantel Wetzel to work with the data warehouse data formatting,
add additional options of when to apply the sex ratio, and correct some treatment of unsexed fish
weighted by sample size and area
NOTE: The age bin called F0 or M0 is retained to show proportion of ages smaller than smallest bin
You will want to likely add this to your first age bin and delete this before putting in SS, or
start the ageBins argument at the 2nd age bin and F0 will be all fish smaller (hence the first age bin)"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nwfscSurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/nwfscSurvey.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Expands the ages up to the total stratum area then sums over strata Original Version Written by Allan Hicks 16 March 2009 Modified by Chantel Wetzel to work with the data warehouse data formatting, add additional options of when to apply the sex ratio, and correct some treatment of unsexed fish weighted by sample size and area NOTE: The age bin called F0 or M0 is retained to show proportion of ages smaller than smallest bin You will want to likely add this to your first age bin and delete this before putting in SS, or start the ageBins argument at the 2nd age bin and F0 will be all fish smaller (hence the first age bin)</h1>
      
      <div class="d-none name"><code>SurveyAFs.fn.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Expands the ages up to the total stratum area then sums over strata
Original Version Written by Allan Hicks 16 March 2009
Modified by Chantel Wetzel to work with the data warehouse data formatting,
add additional options of when to apply the sex ratio, and correct some treatment of unsexed fish
weighted by sample size and area
NOTE: The age bin called F0 or M0 is retained to show proportion of ages smaller than smallest bin
You will want to likely add this to your first age bin and delete this before putting in SS, or
start the ageBins argument at the 2nd age bin and F0 will be all fish smaller (hence the first age bin)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SurveyAFs.fn</span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">datA</span>,</span>
<span>  <span class="va">datTows</span>,</span>
<span>  strat.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Depth_m"</span>, <span class="st">"Latitude_dd"</span><span class="op">)</span>,</span>
<span>  strat.df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ageBins <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  SSout <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  meanRatioMethod <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sex <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  NAs2zero <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  sexRatioUnsexed <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  maxSizeUnsexed <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  sexRatioStage <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  partition <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  fleet <span class="op">=</span> <span class="st">"Enter Fleet"</span>,</span>
<span>  agelow <span class="op">=</span> <span class="st">"Enter"</span>,</span>
<span>  agehigh <span class="op">=</span> <span class="st">"Enter"</span>,</span>
<span>  ageErr <span class="op">=</span> <span class="st">"Enter"</span>,</span>
<span>  nSamps <span class="op">=</span> <span class="st">"Enter Samps"</span>,</span>
<span>  month <span class="op">=</span> <span class="st">"Enter Month"</span>,</span>
<span>  printfolder <span class="op">=</span> <span class="st">"forSS"</span>,</span>
<span>  remove999 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  outputStage1 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dir</dt>
<dd><p>directory this is where the output files will be saved</p></dd>


<dt>datA</dt>
<dd><p>the biological data frame exctrated from the data warehouse using the PullBio.fn</p></dd>


<dt>datTows</dt>
<dd><p>the catch data frame extracted from the data warehouse using the PullCatch.fn</p></dd>


<dt>strat.vars</dt>
<dd><p>the variables used define the stratas. Defaul is bottom depth and latitudes.</p></dd>


<dt>strat.df</dt>
<dd><p>the created strata matrix with the calculated areas by the createStrataDF.fn function</p></dd>


<dt>ageBins</dt>
<dd><p>length bins</p></dd>


<dt>SSout</dt>
<dd><p>if True the output is in a format pastable into SS dat file</p></dd>


<dt>meanRatioMethod</dt>
<dd><p>TRUE/FALSE</p></dd>


<dt>sex</dt>
<dd><p>sex value for Stock Synthesis</p></dd>


<dt>NAs2zero</dt>
<dd><p>change NAs to zeros</p></dd>


<dt>sexRatioUnsexed</dt>
<dd><p>sex ratio to apply to any length bins of a certain size or smaller as defined by the maxSizeUnsexed</p></dd>


<dt>maxSizeUnsexed</dt>
<dd><p>all sizes below this threshold will assign unsexed fish by sexRatio set equal to 0.50, fish larger than this size will have unsexed fish assigned by the calculated sex ratio in the data.</p></dd>


<dt>sexRatioStage</dt>
<dd><p>1/2 apply the sex ratio based on the tows (1) or the expanded numbers (2)</p></dd>


<dt>partition</dt>
<dd><p>partition for Stock Synthesis</p></dd>


<dt>fleet</dt>
<dd><p>fleet number</p></dd>


<dt>agelow</dt>
<dd><p>value for SS -1</p></dd>


<dt>agehigh</dt>
<dd><p>value for SS -1</p></dd>


<dt>ageErr</dt>
<dd><p>age error vector to apply</p></dd>


<dt>nSamps</dt>
<dd><p>effective sample size for Stock Synthesis</p></dd>


<dt>month</dt>
<dd><p>month when the samples were collected</p></dd>


<dt>printfolder</dt>
<dd><p>folder where the length comps will be saved</p></dd>


<dt>remove999</dt>
<dd><p>the output object by the function will have the 999 column combined with the first length bin</p></dd>


<dt>outputStage1</dt>
<dd><p>return the first stage expanded data without compiling it for SS</p></dd>


<dt>verbose</dt>
<dd><p>A logical that specifies if you want to print messages and
warnings to the console. The default is <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="SurveyLFs.fn.html">SurveyLFs.fn</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Allan Hicks and Chantel Wetzel</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chantel R. Wetzel, Kelli F. Johnson, Allan C. Hicks.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

